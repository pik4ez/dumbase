dumbase
=======

Загружает дамп базы данных с боевого сервера и раскатывает его на среде разработки.


Возможности
-----------

* Просмотр списка таблиц в базе данных.
* Контроль над загружаемыми таблицами (перечисление или исключение).
* Повторное использование последнего загруженного дампа.
* Простота локализации.
* Возможность добавления поддержки других движков баз данных.


Установка
---------

1. Загрузить скрипт (`git clone`).
1. Установить права на выполнение (`chmod +x dumbase.py`).
1. Сгенерировать бинарные файлы локализации для необходимой локали (см. ниже).


Генерация файлов локализации
----------------------------

В директории `locale/` содержатся файлы локализации в виде текста. Для корректной
работы механизма локализации необходимо сгенерировать бинарные файлы для соответствующих
локалей. Можно воспользоваться любыми утилитами, генерирующими бинарные файлы
в формате .mo из текстовых файлов в формате .po, например, утилитой msgfmt.py.

Пример для локали ru\_RU:
```
cd /path/to/dumbase
msgfmt -o locale/ru_RU/LC_MESSAGES/dumbase.mo locale/ru_RU/LC_MESSAGES/dumbase.po
```


Использование
-------------

### Получение списка таблиц ###

```
./dumbase.py list $dsn
  $dsn  параметры доступа к базе данных в формате [$user@]$host[:$port]/$dbname
```

Подробная справка: `dumbase.py list -h`


### Загрузка дампа ###

```
./dumbase.py dump $source_dsn $target_dsn
  $source_dsn  параметры доступа к базе, из которой берутся данные
  $target_dsn  параметры доступа к базе, в которую выгружаются данные
```

Подробная справка: `dumbase.py dump -h`

#### Полезные плюшки ####
`-e` исключает таблицу или список таблиц (через пробел) из дампа

`-i` включает таблицу или список таблиц в дамп (полезно при использовании `-c`)

`-c` исключает все таблицы из дампа, используется совместно с `-i`

